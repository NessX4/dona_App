{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DONA | Crear Publicación</title>
    <link rel="stylesheet" href="{% static 'CSS/Index.css' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <img src="{% static 'img/Dona.jpg' %}" alt="Logo DONA" />
            <span>DONA</span>
        </div>
        <ul class="menu">
            <li>
                <a href="{% url 'home' %}">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </li>
            <li class="active">
                <a href="{% url 'donaciones:publicacion_create' %}">
                    <i class="fas fa-plus-circle"></i> Publicar Donación
                </a>
            </li>
            <li>
                <a href="{% url 'donaciones:publicacion_list' %}">
                    <i class="fas fa-donate"></i> Mis Donaciones
                </a>
            </li>
            <li>
                <a href="{% url 'perfil' %}">
                    <i class="fas fa-user"></i> Perfil
                </a>
            </li>
            <li>
                <a href="{% url 'notificaciones' %}">
                    <i class="fas fa-bell"></i> Notificaciones
                </a>
            </li>
            <li>
                <a href="{% url 'logout' %}">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </a>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <div class="dashboard-header">
            <h1>Crear Nueva Publicación</h1>
            <div class="user-info">
                <img src="https://via.placeholder.com/40" alt="Usuario" class="user-avatar" />
                <span class="user-name">Usuario Ejemplo</span>
            </div>
        </div>

        <div class="dashboard-card">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="card mb-4">
                    <div class="card-header">Información Básica</div>
                    <div class="card-body">
                        {{ form.as_p }}
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">Comidas</div>
                    <div class="card-body">
                        {{ comida_formset.management_form }}
                        {% for form in comida_formset %}
                        <div class="form-row mb-3 comida-form">
                            {{ form.id }}
                            <div class="col-md-3">{{ form.nombre.label_tag }} {{ form.nombre }}</div>
                            <div class="col-md-2">{{ form.cantidad.label_tag }} {{ form.cantidad }}</div>
                            <div class="col-md-2">{{ form.categoria.label_tag }} {{ form.categoria }}</div>
                            <div class="col-md-4">{{ form.ingredientes.label_tag }} {{ form.ingredientes }}</div>
                            <div class="col-md-1">{{ form.DELETE.label_tag }} {{ form.DELETE }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">Archivos Adjuntos</div>
                    <div class="card-body">
                        {{ archivo_formset.management_form }}
                        {% for form in archivo_formset %}
                        <div class="form-row mb-3 archivo-form">
                            {{ form.id }}
                            <div class="col-md-6">{{ form.url.label_tag }} {{ form.url }}</div>
                            <div class="col-md-5">{{ form.tipo.label_tag }} {{ form.tipo }}</div>
                            <div class="col-md-1">{{ form.DELETE.label_tag }} {{ form.DELETE }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="main-button"><i class="fas fa-save"></i> Guardar</button>
                    <a href="{% url 'donaciones:publicacion_list' %}" class="secondary-button"><i class="fas fa-times"></i> Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>